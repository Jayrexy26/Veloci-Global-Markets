<!-- =========================
     WALLET ADDRESS (COPY UI)
========================== -->
<div class="walletBox glass">
  <div class="walletTop">
    <div>
      <div class="walletLabel">Deposit Address</div>
      <div class="walletHint">Send only the selected asset to this address.</div>
    </div>

    <button id="copyAddressBtn" class="copyBtn" type="button" aria-label="Copy address">
      <span class="copyIcon">ðŸ“‹</span>
      <span id="copyBtnText">Copy Address</span>
    </button>
  </div>

  <div class="walletAddrWrap">
    <input id="walletAddressInput" class="walletAddrInput" type="text" readonly value="--" />
  </div>
</div>

<!-- ðŸš€ rocket container (used for animation) -->
<div id="rocketLayer" class="rocketLayer"></div>

<style>
  /* ===== PREMIUM COPY ADDRESS UI ===== */

  .walletBox{
    border-radius:18px;
    border:1px solid rgba(255,255,255,0.10);
    background: linear-gradient(180deg, rgba(255,255,255,0.07), rgba(255,255,255,0.04));
    padding:16px;
    margin:14px 0 18px;
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    box-shadow: 0 14px 50px rgba(0,0,0,0.35);
  }

  .walletTop{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:12px;
  }

  .walletLabel{
    font-weight:800;
    font-size:14px;
    color:rgba(255,255,255,0.92);
    letter-spacing:.2px;
  }

  .walletHint{
    font-size:12px;
    color:rgba(255,255,255,0.55);
    margin-top:3px;
  }

  .walletAddrWrap{
    display:flex;
    gap:10px;
  }

  .walletAddrInput{
    width:100%;
    border-radius:14px;
    padding:14px 14px;
    border:1px solid rgba(255,255,255,0.10);
    background: rgba(0,0,0,0.26);
    color: rgba(255,255,255,0.88);
    outline:none;
    font-size:13px;
  }

  .copyBtn{
    border:none;
    cursor:pointer;
    border-radius:14px;
    padding:10px 14px;
    font-weight:800;
    font-size:13px;
    color:white;
    display:flex;
    align-items:center;
    gap:8px;

    background: linear-gradient(90deg, rgba(59,130,246,0.95), rgba(168,85,247,0.90));
    box-shadow: 0 12px 30px rgba(59,130,246,0.20);
    transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
    min-width:140px;
    justify-content:center;
  }

  .copyBtn:hover{
    transform: translateY(-1px);
    filter: brightness(1.02);
    box-shadow: 0 16px 40px rgba(59,130,246,0.24);
  }

  .copyBtn:active{
    transform: translateY(0px);
    filter: brightness(0.98);
  }

  .copyIcon{
    font-size:16px;
    line-height:1;
  }

  /* âœ… Copied state (green) */
  .copyBtn.copied{
    background: linear-gradient(90deg, rgba(34,197,94,1), rgba(16,185,129,1));
    box-shadow: 0 14px 34px rgba(34,197,94,0.25);
  }

  /* ===== Rocket animation layer ===== */
  .rocketLayer{
    position:fixed;
    left:0;
    top:0;
    width:100%;
    height:100%;
    pointer-events:none;
    z-index:999999;
    overflow:hidden;
  }

  .rocket{
    position:absolute;
    font-size:22px;
    animation: rocketFly 1.2s ease-out forwards;
    filter: drop-shadow(0 12px 14px rgba(0,0,0,0.35));
    user-select:none;
  }

  @keyframes rocketFly{
    0%{
      transform: translate(0, 0) scale(0.85) rotate(-10deg);
      opacity:0.95;
    }
    25%{
      transform: translate(-6px, -80px) scale(1.0) rotate(-5deg);
      opacity:1;
    }
    60%{
      transform: translate(10px, -220px) scale(1.1) rotate(2deg);
      opacity:1;
    }
    100%{
      transform: translate(18px, -420px) scale(1.15) rotate(10deg);
      opacity:0;
    }
  }
</style>

<script>
  // ============================================================
  // COPY ADDRESS PREMIUM UX (NO ALERT, GREEN BUTTON + ðŸš€ FLY OUT)
  // ============================================================

  (function initCopyAddressUX(){
    const copyBtn = document.getElementById("copyAddressBtn");
    const copyBtnText = document.getElementById("copyBtnText");
    const walletAddressInput = document.getElementById("walletAddressInput");
    const rocketLayer = document.getElementById("rocketLayer");

    if (!copyBtn || !copyBtnText || !walletAddressInput || !rocketLayer) return;

    let resetTimer = null;

    function spawnRocketFromButton(btn){
      const rect = btn.getBoundingClientRect();
      const rocket = document.createElement("div");
      rocket.className = "rocket";
      rocket.textContent = "ðŸš€";

      // Start position: center of the button
      const startX = rect.left + rect.width / 2 - 10;
      const startY = rect.top + rect.height / 2 - 10;

      rocket.style.left = `${startX}px`;
      rocket.style.top = `${startY}px`;

      rocketLayer.appendChild(rocket);

      // remove after animation
      setTimeout(() => {
        rocket.remove();
      }, 1400);
    }

    async function copyText(text){
      // Try modern clipboard first
      try{
        await navigator.clipboard.writeText(text);
        return true;
      }catch(err){
        // fallback method
        try{
          walletAddressInput.select();
          walletAddressInput.setSelectionRange(0, 999999);
          const ok = document.execCommand("copy");
          window.getSelection()?.removeAllRanges();
          return ok;
        }catch(e){
          return false;
        }
      }
    }

    copyBtn.addEventListener("click", async () => {
      const address = (walletAddressInput.value || "").trim();

      if (!address || address === "--"){
        // Soft feedback without alert
        copyBtnText.textContent = "No address";
        copyBtn.classList.add("copied");
        spawnRocketFromButton(copyBtn);

        clearTimeout(resetTimer);
        resetTimer = setTimeout(() => {
          copyBtnText.textContent = "Copy Address";
          copyBtn.classList.remove("copied");
        }, 1400);
        return;
      }

      const ok = await copyText(address);

      if (ok){
        // âœ… green state + rocket fly
        copyBtn.classList.add("copied");
        copyBtnText.textContent = "Copied âœ…";
        spawnRocketFromButton(copyBtn);

        clearTimeout(resetTimer);
        resetTimer = setTimeout(() => {
          copyBtnText.textContent = "Copy Address";
          copyBtn.classList.remove("copied");
        }, 2000);
      } else {
        // Fallback feedback (still no alert)
        copyBtnText.textContent = "Copy failed";
        clearTimeout(resetTimer);
        resetTimer = setTimeout(() => {
          copyBtnText.textContent = "Copy Address";
        }, 1600);
      }
    });

  })();
</script>
